<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-S7Q7M2B9DJ"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-S7Q7M2B9DJ");
    </script>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Mobile Specific Metas -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, viewport-fit=cover"
    />
    <title>Jemmia Priority - Danh sách tin tức</title>
    <!-- Favicon and Touch Icons  -->
    <link rel="shortcut icon" href="images/logo.png" />
    <link rel="apple-touch-icon-precomposed" href="images/logo.png" />
    <!-- Font -->
    <link rel="stylesheet" href="fonts/fonts.css" />
    <!-- Icons -->
    <link rel="stylesheet" href="fonts/icons-alipay.css" />
    <link rel="stylesheet" href="styles/bootstrap.css" />
    <link rel="stylesheet" href="styles/swiper-bundle.min.css" />
    <link rel="stylesheet" type="text/css" href="styles/styles.css" />
    <link
      rel="manifest"
      href="_manifest.json"
      data-pwa-version="set_in_manifest_and_pwa_js"
    />
    <link
      rel="apple-touch-icon"
      sizes="192x192"
      href="app/icon/icon-192x192.jpg"
    />
  </head>

  <body>
    <!-- preloade -->

    <!-- /preload -->
    <div class="header is-fixed">
      <div class="tf-container">
        <div
          class="tf-statusbar d-flex justify-content-center align-items-center"
        >
          <a href="#" class="back-btn st1"> <i class="icon-left"></i> </a>
          <h3 id="title_section"></h3>
          <a
            href="#"
            id="btn-popup-up"
            class="action-right"
            style="color: white"
            ><i class="icon icon-notification1" style="color: white"></i>
          </a>
        </div>
      </div>
    </div>

    <div id="app-wrap">
      <div class="tf-container">
        <section class="row row-cols-2 row-cols-sm-3" id="load_list">
          <!--  -->

          <!--  -->
        </section>
        <!-- <section>
          <p class="text-center" onclick="getData()">Load More <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
            <path fill="#003A40" d="m8.303 12.404l3.327 3.431c.213.22.527.22.74 0l6.43-6.63C19.201 8.79 18.958 8 18.43 8h-5.723z" />
            <path fill="#003A40" d="M11.293 8H5.57c-.528 0-.771.79-.37 1.205l2.406 2.481z" opacity="0.5" />
          </svg></p>
        </section> -->
      </div>
      <!--  -->
      <!-- <img onclick="scrollToTop()" class="text-black border border-2 p-3 bg-white rounded-circle " style="position: fixed; bottom: 80px; width: 10%; height: 30px; right: 10px; height: 50px;"  src="./images/up-arrow (1).png" alt=""> -->
      <!--  -->
    </div>

    <div class="bottom-navigation-bar">
      <div class="tf-container">
        <ul class="tf-navigation-bar">
          <li>
            <a
              style="outline: none"
              class="fw_4 d-flex justify-content-center align-items-center flex-column"
              href="home.html"
              ><i class="icon-home"></i>Trang chủ</a
            >
          </li>
          <li>
            <a
              style="outline: none"
              class="fw_4 d-flex justify-content-center align-items-center flex-column"
              href="58_history.html"
              ><i class="icon-history"></i> Lịch sử GD</a
            >
          </li>
          <li>
            <a
              style="outline: none"
              class="fw_4 d-flex justify-content-center align-items-center flex-column"
              href="40_qr-code.html"
              ><img
                class="border p-2 rounded-circle text-center object-fit-cover"
                style="
                  background: #003a40;
                  width: 42px;
                  height: 42px;
                  object-fit: cover;
                "
                src="./images/call.svg"
                alt=""
              />
            </a>
          </li>
          <li class="active">
            <a
              style="outline: none"
              class="fw_6 d-flex justify-content-center align-items-center flex-column"
              href="62_rewards.html"
            >
              <i class="icon-star-fill"></i>Điểm thưởng
            </a>
          </li>
          <li>
            <a
              style="outline: none"
              class="fw_4 d-flex justify-content-center align-items-center flex-column"
              href="69_profile.html"
              ><i class="icon-user-outline"></i> Cá nhân</a
            >
          </li>
        </ul>
        <!-- <span class="line"></span> -->
      </div>
    </div>
    <div class="tf-panel up">
      <div class="panel-box panel-up panel-noti">
        <div class="header is-fixed">
          <div class="tf-container">
            <div
              class="tf-statusbar d-flex justify-content-center align-items-center"
            >
              <a href="#" class="clear-panel"> <i class="icon-left"></i> </a>
              <h3>Notification</h3>
            </div>
          </div>
        </div>
        <div id="app-wrap" class="style1">
          <div class="tf-container">
            <div class="tf-tab mt-3">
              <div class="swiper-container tes-noti">
                <ul class="swiper-wrapper menu-tabs">
                  <li class="swiper-slide nav-tab active">
                    <a href="#">All Notification</a>
                  </li>
                  <li class="swiper-slide nav-tab"><a href="#">Remind</a></li>
                  <li class="swiper-slide nav-tab">
                    <a href="#"> Transaction</a>
                  </li>
                  <li class="swiper-slide nav-tab">
                    <a href="#">Promotion</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript" src="javascript/jquery.min.js"></script>
    <script type="text/javascript" src="javascript/bootstrap.min.js"></script>
    <script
      type="text/javascript"
      src="javascript/swiper-bundle.min.js"
    ></script>
    <script type="text/javascript" src="javascript/swiper.js"></script>
    <script type="text/javascript" src="javascript/main.js"></script>
    <script>
      const user_id = JSON.parse(localStorage.getItem("user"));
      const tokens = JSON.parse(localStorage.getItem("accessToken"));
      if (!user_id || !tokens) {
        window.location.assign("/04_login.html");
      }
    </script>
    <script>
      const IBLogName = [
        {
          title: "uu_dai_cua_ban",
          value: 1000909554,
          name: "Ưu đãi của bạn",
        },
        {
          title: "uu_dai_thang",
          value: 1000909554,
          name: "Ưu đãi tháng",
        },
        {
          title: "tin-tuc_su-kien",
          value: 1000909551,
          name: "Tin tức và sự kiện",
        },
        {
          title: "noi_bat",
          value: 1000909552,
          name: "Kiến thức kim cương",
        },
        {
          title: "jemmia",
          value: 1000909552,
          name: "Giới thiệu Jemmia",
        },
      ];
      // Header
      const token = JSON.parse(localStorage.getItem("accessToken"));
      const profile = JSON.parse(localStorage.getItem("user"));
      console.log("profile", profile.role);
      const headers = {
        method: "GET",
        headers: {
          "Content-Type": "application/json",
          Authorization: "Bearer " + token,
        },
        // body: JSON.stringify(payload),
      };
      const path = window.location.search;
      const params = new URLSearchParams(path);
      const value = params.get("name");
      let blogId = IBLogName.filter((items) => items.title == value);
      const title_section = (document.getElementById(
        "title_section"
      ).innerText = blogId[0].name);
      var count = 1;
      function getData() {
        // interface

        const demo = fetch(
          `https://priority-api.jemmia.vn/blog?&page=${count}&blogId=${
            blogId[0].value
          }${
            blogId[0].title == "uu_dai_cua_ban"
              ? `&userRole=${profile.role}`
              : ""
          }`,
          headers
        ).then((event) =>
          event.json().then((item) => {
            item.forEach((items, index) => {
              var foodBox = document.createElement("a");
              // foodBox.style.cursor = 'none'
              foodBox.href = `68_gift-card-detail.html?id=${items.id}&name=${blogId[0].title}`;
              foodBox.className = "food-box px-2 my-2 ";

              // Tạo phần tử con (div có class "img-box")
              var imgBox = document.createElement("div");
              if (items.post && items.post.discountAmount) {
                imgBox.className = "img-box";
              } else {
                imgBox.className = "img-box2";
              }

              // Tạo phần tử con (img)
              var img = document.createElement("img");
              img.style.height = "120px";
              img.style.objectFit = "cover";
              img.src = items.image.src;
              img.alt = "images";
              imgBox.appendChild(img);

              // Tạo phần tử con (span)
              var span = document.createElement("span");
              // span.innerHTML = "35%";
              if (items.post?.discountAmount) {
                span.textContent = `${items.post.discountAmount}%`;
                imgBox.appendChild(span);
              } else {
              }

              foodBox.appendChild(imgBox);

              // Tạo phần tử con (div có class "content")
              var content = document.createElement("div");
              content.className = "content";

              // Tạo phần tử con (h4)
              var h4 = document.createElement("h4");
              h4.classList.add("text-truncated");
              h4.style.height = "44px";
              // Tạo phần tử con (a)
              var a = document.createElement("a");
              // a.style.cursor = 'none'
              a.href = `68_gift-card-detail.html?id=${items.id}&name=${blogId[0].title}`;
              a.innerHTML = items.title;
              h4.appendChild(a);

              content.appendChild(h4);

              // Tạo phần tử con (div có class "rating")
              var rating = document.createElement("div");
              var dateString = items?.publishedAt;
              var date = new Date(dateString);
              var minutes = date.getMinutes();
              var hours = date.getHours();
              var day = date.getDate();
              var month = date.getMonth() + 1; // Ghi chú: Tháng bắt đầu từ 0, nên cần cộng 1
              var year = date.getFullYear();

              var formattedDate = `${day < 10 ? `0${day}` : day}.${
                month < 10 ? `0${month}` : month
              }.${year}`;
              rating.className = "rating mt-2";
              rating.innerHTML = formattedDate;

              content.appendChild(rating);

              foodBox.appendChild(content);

              // Thêm phần tử cha vào cây DOM
              var container = document.getElementById("load_list");
              container.appendChild(foodBox);
            });
          })
        );

        count++;
      }

      getData();
      // Tạo phần tử cha (div có class "food-box")
    </script>

    <script>
      function scrollToTop() {
        window.scrollTo({
          top: 0,
          behavior: "smooth",
        });
      }
    </script>
  </body>
</html>
