<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-S7Q7M2B9DJ"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-S7Q7M2B9DJ");
    </script>
    <!-- Mobile Specific Metas -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, viewport-fit=cover"
    />
    <title>Jemmia Priority - Thông tin hạng</title>
    <!-- Favicon and Touch Icons  -->
    <link rel="shortcut icon" href="images/logo.png" />
    <link rel="apple-touch-icon-precomposed" href="images/logo.png" />
    <!-- Font -->
    <link rel="stylesheet" href="fonts/fonts.css" />
    <!-- Icons -->
    <link rel="stylesheet" href="fonts/icons-alipay.css" />
    <link rel="stylesheet" href="styles/bootstrap.css" />

    <link rel="stylesheet" type="text/css" href="styles/styles.css" />
    <link
      rel="manifest"
      href="_manifest.json"
      data-pwa-version="set_in_manifest_and_pwa_js"
    />
    <link
      rel="apple-touch-icon"
      sizes="192x192"
      href="app/icon/icon-192x192.jpg"
    />
  </head>
  <body>
    <!-- preloade -->

    <!-- /preload -->
    <div class="header is-fixed">
      <div class="tf-container">
        <div
          class="tf-statusbar d-flex justify-content-center align-items-center"
        >
          <a style="outline: none" href="#" class="back-btn">
            <i class="icon-left"></i>
          </a>
          <h3>Upload ảnh CCCD (Mặt trước)</h3>
          <!-- <a href="#" id="btn-popup-up" class="action-right"><i class="icon icon-filter"></i> </a> -->
        </div>
      </div>
    </div>

    <section class="d-flex container flex-column gap-4">
      <div class="d-flex justify-content-center align-items-center">
        <video id="video" width="800" height="480" autoplay></video>
      </div>
      <div class="">
        <button id="capture" class="tf-btn accent large">Chụp hình</button>
      </div>
    

      <canvas
        id="canvas"
        width="800"
        height="480"
        style="display: none"
      ></canvas>
      <div
        class="d-flex justify-content-center align-items-center w-100"
        style="height: 20vh"
      >
        <div class="" id="link" style="font-size: 24px; font-weight: 600">
          <a id="href" href=""></a>
        </div>
        <div
          class="spinner-border"
          id="spin"
          style="display: none"
          role="status"
        >
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>

      <div
        class=""
        id="noti"
        style="
          position: absolute;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.4);

          top: 0;
          left: 0;
          z-index: 999;
          display: none;
          justify-content: center;
          align-items: center;
        "
      >
        <div
          class="bg-white d-flex flex-column justify-content-center align-items-center container gap-3 py-3"
          style="width: 320px; height: 200px; border-radius: 16px"
        >
          <p
            class="text-success d-flex justify-content-center align-items-center"
            style="font-size: 20px; font-weight: 600; height: 100px"
          >
            Upload hình ảnh thành công
          </p>
          <div class="back-btn w-100">
            <button
              class="text-white text-center w-100"
              style="background-color: #003a40"
            >
              Đóng
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- <img id="photo" alt="The screen capture will appear in this box." /> -->
  </body>
  <script type="text/javascript" src="javascript/bootstrap.min.js"></script>
  <script type="text/javascript" src="javascript/jquery.min.js"></script>
  <script type="text/javascript" src="javascript/main.js"></script>
  <script type="module" src="javascript/uploadFont.js"></script>
  <script>
    const user = JSON.parse(localStorage.getItem("user"));
    const token = JSON.parse(localStorage.getItem("accessToken"));
    const HEADER_CONFIGs = {
      method: "GET",
      headers: {
        "Content-Type": "application/json",
        Authorization: "Bearer " + token,
      },
    };
    const getIDImage = async () => {
      const data = await fetch(
        `https://priority-api.jemmia.vn/user/${user.id}`,
        HEADER_CONFIGs
      ).then((even) =>
        even.json().then((items) => {
          if (items.frontIDCardImageUrl) {
            const href = document.getElementById("href");
            // href.innerText = "CCCD_truoc.jpg";
            // href.href = items.frontIDCardImageUrl;
            // href.target = "blank";
          }
        })
      );
    };

    getIDImage();
  </script>
</html>
