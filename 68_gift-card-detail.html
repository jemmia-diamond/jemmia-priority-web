<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-S7Q7M2B9DJ"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-S7Q7M2B9DJ");
    </script>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Mobile Specific Metas -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, viewport-fit=cover"
    />
    <title>gift card detail</title>
    <!-- Favicon and Touch Icons  -->
    <link rel="shortcut icon" href="images/logo.png" />
    <link rel="apple-touch-icon-precomposed" href="images/logo.png" />
    <!-- Font -->
    <link rel="stylesheet" href="fonts/fonts.css" />
    <!-- Icons -->
    <link rel="stylesheet" href="fonts/icons-alipay.css" />
    <link rel="stylesheet" href="styles/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="styles/styles.css" />
    <link
      rel="manifest"
      href="_manifest.json"
      data-pwa-version="set_in_manifest_and_pwa_js"
    />
    <link rel="apple-touch-icon" sizes="192x192" href="images/logo.png" />
    <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@2.7.570/build/pdf.min.js"></script>
  </head>

  <body class="bg_surface_color">
    <!-- preload -->
    <!-- <div class="preload preload-container">
      <div class="preload-logo">
        <div class="spinner"></div>
      </div>
    </div> -->
    <div class="header is-fixed">
      <div class="tf-container">
        <div
          class="tf-statusbar d-flex justify-content-center align-items-center"
        >
          <a style="outline: none" href="#" class="back-btn st1">
            <i class="icon-left"></i>
          </a>
          <h3></h3>
          <a
            href="#"
            id="btn-popup-up"
            class="action-right"
            style="color: white"
            ><i class="icon icon-notification1" style="color: white"></i>
          </a>
        </div>
      </div>
    </div>
    <!-- /preload -->
    <div class="header-style2">
      <!-- <a href="#" class="back-btn st1"> <i class="icon-left" style="color: white;"></i> </a> -->
      <div class="tf-container" id="isSale">
        <a href="#" class="back-btn"> </a>
        <!-- <span class="sale" id="sale"></span> -->
      </div>
    </div>
    <div class="">
      <div class="" style="position: relative">
        <img id="image" src="" alt="" />
        <span class="sale" id="sale"></span>
      </div>
      <div class="app-section bg_white_color giftcard-detail-section-1">
        <div class="tf-container">
          <div class="voucher-info">
            <h2 class="fw_6" id="title"></h2>
          </div>
          <div class="mt-2">
            <p class="mt-2 fw_4" id="date"></p>
          </div>
        </div>
      </div>
      <div class="app-section mt-1 bg_white_color giftcard-detail-section-2">
        <div class="tf-container">
          <div class="voucher-desc">
            <!-- <h4 class="fw_6">Description</h4> -->
            <p class="mt-1" id="description">
              <!-- Voucher worth $5, can be used at all
              <span class="fw_6">Burger King </span> stores -->
            </p>
            <div class="" id="pdf"></div>
            <!-- <a href="#" class="btn-view-more"
              >View more <i class="icon-down"></i>
            </a> -->
          </div>
        </div>
      </div>
    </div>
    <!-- <div class="bottom-navigation-bar bottom-btn-fixed">
        <div class="tf-container">
            <a href="62_rewards.html" class="tf-btn accent large">See Other Suggestions</a>
        </div>
    </div> -->

    <script type="text/javascript" src="javascript/jquery.min.js"></script>
    <script type="text/javascript" src="javascript/bootstrap.min.js"></script>
    <script type="text/javascript" src="javascript/main.js"></script>
    <script>
      const user_id = JSON.parse(localStorage.getItem("user"));
      const tokens = JSON.parse(localStorage.getItem("accessToken"));
      if (!user_id || !tokens) {
        window.location.assign("/04_login.html");
      }
    </script>
    <script>
      // Interface
      const IBLogName = [
        {
          title: "uu_dai_cua_ban",
          value: 1000909551,
        },
        {
          title: "uu_dai_thang",
          value: 1000909553,
        },
        {
          title: "tin-tuc_su-kien",
          value: 1000909554,
        },
        {
          title: "noi_bat",
          value: 1000909552,
        },
      ];
      // Header
      const token = JSON.parse(localStorage.getItem("accessToken"));
      const headers = {
        method: "GET",
        headers: {
          "Content-Type": "application/json",
          Authorization: "Bearer " + token,
        },
        // body: JSON.stringify(payload),
      };

      //
      const urlParams = new URLSearchParams(window.location.search);
      const id = urlParams.get("id");
      const value = urlParams.get("name");
      // setBLogID
      let blogId = IBLogName.filter((items) => items.title == `${value}`);
      // Fetch
      const detail = fetch(
        `https://priority-api.jemmia.vn/blog/${id}?blogType=${blogId[0].value}`,
        headers
      ).then((event) =>
        event.json().then((items) => {
          const title = (document.getElementById("title").innerText =
            items.title);
          //
          var dateString = items?.publishedAt;
          var date = new Date(dateString);
          var minutes = date.getMinutes();
          var hours = date.getHours();
          var day = date.getDate();
          var month = date.getMonth() + 1; // Ghi chú: Tháng bắt đầu từ 0, nên cần cộng 1
          var year = date.getFullYear();

          var formattedDate = `${day < 10 ? `0${day}` : day}.${
            month < 10 ? `0${month}` : month
          }.${year}`;
          //////
          const dates = (document.getElementById("date").innerText =
            formattedDate);
          //
          const description = document.getElementById("description");

          const pdfUrl = "/images/slide.pdf";
          console.log(items);
          if (items.post.pdfUrl) {
            description.style.display = "flex";

            description.style.alignItems = "center";
            description.style.width = "100%";
            description.style.height = "500px";
            // description.style.position = "relative";

            const pdfUrl = "http://URL_TO_PDF.com/pdf.pdf";

            const embedElement = document.createElement("embed");
            // const iframeElement = document.createElement("object");
            embedElement.src = `${items.post.pdfUrl}#toolbar=0&navpanes=0&scrollbar=0&view=full`;
            embedElement.width = "100%";
            embedElement.height = "500px";
            embedElement.style.width = "100%";
            embedElement.style.height = "500px";
            embedElement.style.objectFit = "contain";

            description.appendChild(embedElement);
          } else {
            description.innerHTML = items.bodyHtml;
          }

          const image = document.getElementById("image");
          image.src = items.image.src;
          // image.style.maxHeight = "500px";
          // image.style.height = "250px";
          // image.style.objectFit = "cover";

          if (items.post?.discountAmount) {
            const sale = document.getElementById("sale");
            sale.innerText = `${items.post.discountAmount} %`;
          } else {
            const hiddenSalse = (document.getElementById("sale").style.display =
              "none");
          }
        })
      );
    </script>
  </body>
</html>
